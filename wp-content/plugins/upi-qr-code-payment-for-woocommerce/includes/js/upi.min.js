function upiTransactionIDField(){var e=new Date,t="";if("show_require"==upiwc_params.transaction_id&&(t='<span class="upiwc-required">*</span>'),"hide"!=upiwc_params.transaction_id){var n="upiwc-"+upiwc_params.app_theme+"-input";return'<form id="upiwc-form"><div class="upiwc-form-group"><label for="upiwc-transaction-number"><strong>'+upiwc_params.transaction_text+"</strong> "+t+'</label><div class="upiwc-clear-area"></div><input type="text" id="upiwc-transaction-number" class="'+n+'" placeholder="e.g. '+e.getFullYear().toString().slice(-1)+"01422121258 (starts with "+e.getFullYear().toString().slice(-1)+')" maxlength="12" style="width: 60%;" onkeypress="return isNumber(event)" /></div><div class="upiwc-clear-area"></div></div>'}return""}function isNumber(e){e=e||window.event;var t=e.which?e.which:e.keyCode;return!(8!=t&&0!=t&&t>31&&(t<48||t>57))}jQuery(document).ready(function(e){if("undefined"==typeof upiwc_params)return!1;if(1==upiwc_params.prevent_reload&&(window.onbeforeunload=function(){return"Are you sure you want to leave?"}),"yes"==upiwc_params.is_mobile)var t=140,n="100%",i="100%",a="95%",o=0;else t=250,n="60%",i="50%",a="40%",o=40;var r=e("#upiwc-confirm-payment").data("theme"),c="upi://pay?pa="+upiwc_params.payee_vpa+"&pn="+upiwc_params.payee_name+"&am="+upiwc_params.order_amount.replace(".00","")+"&tr="+upiwc_params.order_key.replace("wc_order_","")+"&mc=5411&cu=INR&tn=ORDER ID "+upiwc_params.order_number,p=encodeURI(c);e("#upiwc-qrcode").length&&new QRCode("upiwc-qrcode",{text:p,width:t,height:t,correctLevel:QRCode.CorrectLevel.H,quietZone:6,onRenderingEnd:function(){e("#upiwc-confirm-payment").trigger("click")}}),e("body").on("contextmenu","#upiwc-qrcode img",function(e){return!1}),e("#upiwc-cancel-payment").click(function(e){window.onbeforeunload=null,window.location=upiwc_params.cancel_url,e.preventDefault()}),e(".upiwc-return-link").click(function(e){window.onbeforeunload=null,window.location=upiwc_params.payment_url,e.preventDefault()}),e("#upiwc-confirm-payment").on("click",function(t){t.preventDefault();var c=e.confirm({title:'<span class="upiwc-popup-title-'+upiwc_params.app_theme+'">Scan this QR Code</span>',content:e("#js_qrcode").html(),useBootstrap:!1,theme:upiwc_params.app_theme,animation:"scale",type:e("#upiwc-confirm-payment").data("theme"),boxWidth:n,draggable:!1,offsetBottom:o,offsetTop:o,closeIcon:!0,onContentReady:function(){var t=this;this.$content.find(".btn-upi-copy").click(function(n){var i=e("<input>");e("body").append(i),i.val(upiwc_params.payee_vpa).select(),document.execCommand("copy"),i.remove(),n.preventDefault(),$btn=t.$content.find(".btn-upi-copy"),$old_value=$btn.text(),$btn.text("Copied !"),setTimeout(function(){$btn.text($old_value)},1e3),n.preventDefault()}),this.$content.find(".btn-upi-pay").click(function(e){window.onbeforeunload=null,window.location=p,e.preventDefault()});var n=this.$content.find("#upiwc-qrcode img").attr("src");this.$content.find(".btn-upi-download").click(function(e){var t=document.createElement("a");t.href=n,t.download="QR Code.png",t.click(),e.preventDefault()}),setTimeout(function(){t.buttons.nextStep.show()},upiwc_params.btn_show_interval)},onClose:function(){e("#upiwc-processing").hide(),e(".upiwc-buttons, .upiwc-return-link").fadeIn("slow"),e(".upiwc-waiting-text").text("Please click the Pay Now button below to complete the payment against this order.")},buttons:{nextStep:{text:"Proceed to Next Step",btnClass:"btn-"+r,keys:["enter","shift"],isHidden:!0,action:function(){return c.toggle(),e("#upiwc-processing").show(),e(".upiwc-buttons, .upiwc-return-link").hide(),e(".upiwc-waiting-text").text("Please wait and don't press back or refresh this page while we are processing your payment..."),e.confirm({title:'<span class="upiwc-popup-title-'+upiwc_params.app_theme+'">Confirm your Payment!</span>',content:upiTransactionIDField()+'<div id="upiwc-confirm-text" class="upiwc-confirm-text">'+upiwc_params.confirm_message+"</div>",useBootstrap:!1,theme:upiwc_params.app_theme,type:r,boxWidth:a,draggable:!1,buttons:{confirm:{text:"Confirm",btnClass:"btn-"+r,action:function(){var t=this.$content.find("#upiwc-transaction-number").val();if("show_require"==upiwc_params.transaction_id&&(""==t||t.length!=upiwc_params.tran_id_length))return e.alert({title:'<span class="upiwc-popup-title-'+upiwc_params.app_theme+'">Error!</span>',content:'<div id="upiwc-error-text">Please enter a valid Transaction / UTR / Reference ID and try again.</div>',useBootstrap:!1,draggable:!1,theme:upiwc_params.app_theme,type:"red",boxWidth:a}),!1;var n="";""!=t&&(n="<input type='hidden' name='wc_transaction_id' value='"+t+"'></input>"),window.onbeforeunload=null,e("#payment-success-container").html("<form method='POST' action='"+upiwc_params.callback_url+"' id='UPIJSCheckoutForm' style='display: none;'><input type='hidden' name='wc_order_id' value='"+upiwc_params.order_id+"'><input type='hidden' name='wc_order_key' value='"+upiwc_params.order_key+"'>"+n+"</form>"),e.dialog({title:'<span class="upiwc-popup-title-'+upiwc_params.app_theme+'">Processing...<span>',content:'<div id="upiwc-confirm-text" class="upiwc-confirm-text">'+upiwc_params.processing_text+"</div>",useBootstrap:!1,draggable:!1,theme:upiwc_params.app_theme,type:"blue",closeIcon:!1,offsetBottom:o,offsetTop:o,boxWidth:i}),e("#UPIJSCheckoutForm").submit()}},goBack:{text:"Go Back",action:function(){c.toggle()}}}}),!1}}}});e("#upiwc-processing").show(),e(".upiwc-buttons, .upiwc-return-link").hide(),e(".upiwc-waiting-text").text("Please wait and don't press back or refresh this page while we are processing your payment...")})});